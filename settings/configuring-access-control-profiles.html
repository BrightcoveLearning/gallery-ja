---
title: アクセスコントロールプロファイルの設定
parent: Gallery Settings
description: In this topic you will learn how to configure access control profiles for a Gallery Portal Experience. You can control access based on IP address, single sign-on (SSO), or an access code.
---
<article class="bcls-article">
  <h1>アクセス制御プロファイルの設定</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <p>既定では、ギャラリーポータルエクスペリエンスが公開されると、サイト URL を持つすべてのユーザーがサイトにアクセスできます。アクセス制御プロファイルを作成して、ギャラリーポータルエクスペリエンスへのアクセスを制限できます。アクセス制御プロファイルは、ギャラリー設定の一部として作成され、プロファイルはサイトに割り当てられます。アクセス制御プロファイルは、次の条件に基づいてアクセスを制限するために作成できます。</p>
    <ul>
      <li><a href="#ip">IPアドレス</a></li>
      <li><a href="#sso">シングルサインオン</a></li>
      <li><a href="#accesscode">アクセスコード</a></li>
    </ul>
    <p>Gallery Portal Experience は、1 つのアクセス制御プロファイルでのみ構成できます。各アクセスコントロールプロファイルには、1 つのアクセス制限タイプしか指定できません。たとえば、IP アドレスとアクセスコードの両方を使用するプロファイルを作成することはできません。また、シングルサインオンを使用する場合、プロファイルごとに構成できる ID プロバイダーは 1 つだけです。</p>
    <p>アクセス制御プロファイルを作成するには、次の手順を実行します。</p>
    <ol class="bcls-tasklist-restart">
      <li>ギャラリーモジュールを開きます。</li>
      <li>ギャラリーのホームページの [ <strong>設定]</strong>リンクをクリックします。</li>
      <li>左側のナビゲーションで、[ <strong>アクセス制御プロファイル] をクリックします</strong>。作成されたアクセス制御プロファイルのリストが表示されます。
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="profiles list" src="/assets/images/settings/node16450-access-control-list.png" /></figure>
        <aside class="bcls-aside bcls-aside--information">注:自分で作成したものでなくても、ご自身のアカウントにあるアクセス制御プロファイルが表示されます。Gallery がアクセス制御プロファイルを実装する前にサイトの IP 制限、SSO、またはアクセスコードを構成していた場合、この機能のリリース時にそれらの設定はアクセス制御プロファイルとして保存されています。</aside>
      </li>
      <li>[<strong>プロファイルの作成</strong>]をクリックします。</li>
      <li>プロファイルに [ <strong>名前] を指定します</strong>。</li>
      <li><strong>（オプション）</strong><strong></strong>セッションタイムアウトを設定して、ユーザーのセッションが続く時間を指定します。いくつかの注意事項：
        <ul>
          <li>この設定は、SSO とアクセスコードを使用する場合に適用されます</li>
          <li>これは「アイドルタイムアウト」です。ギャラリーサーバーがヒットすると (サイトへのページの読み込みまたはサイトへの API 呼び出しによって) タイマーがリセットされます。これにより、ビューアーは指定されたタイムアウトよりも長く継続的にブラウズできますが、タイムアウトよりも長くアイドル状態になるとすぐにログアウトされます。ただし、動画が視聴されている間、ギャラリーサーバーにアクセスしていないため、タイムアウト値は最長動画よりも長くする必要があります。</li>
          <li>SSO プロバイダは、再認証を強制するか、セッションタイムアウトをタイムアウト未満に設定する必要があります。そうでない場合は、タイムアウト後に SSO プロバイダーにリダイレクトし、ユーザーがログインしているという応答を直ちに発行します。</li>
        </ul>
      </li>
      <li>サイトをセキュリティで保護するオプションを選択します。<strong>アクセスコントロールプロファイルごとに選択できるオプションは 1 つだけです</strong>。
        <ul>
          <li><a href="#ip">IPアドレス</a></li>
          <li><a href="#sso">シングルサインオン</a></li>
          <li><a href="#accesscode">アクセスコード</a></li>
        </ul>
      </li>
      <li>[ <strong>保存] をクリックします</strong>。</li>
      <li>必要に応じて他のアクセス制御プロファイルを作成します。</li>
    </ol>
    <p>アクセス制御プロファイルを編集または削除するには、編集（<img alt="edit icon" src="/assets/images/settings/node16450-edit-icon.png" />）または削除（<img alt="delete icon" src="/assets/images/settings/node16450-delete-icon.png" />）アクセス制御プロファイルに関連付けられたボタン。アクセス制御プロファイルを作成した後、それらをサイトプロパティの一部としてサイトに割り当てることができます。詳細は、「<a href="/experiences/portal/controlling-access-portal-experience.html">ポータル・エクスペリエンスへのアクセスの制御</a>」を参照してください。</p>
  </section>
  <section class="bcls-section">
    <h2 id="ip">IP制限を設定する</h2>
    <p>IP 制限を使用するアクセス制御プロファイルを作成する場合、定義済みの範囲外の IP アドレスを持つビューアは、サイトにアクセスしようとするとエラーを受け取ります。</p>
    <p>IP 制限を使用するようにアクセスコントロールプロファイルを設定するには、次の手順を実行します。</p>
    <ol class="bcls-tasklist-restart">
      <li>[IP <strong>アドレスで制限</strong> ] オプションを選択します。</li>
      <li>サイトにアクセスできる IP アドレスの範囲を入力します。<a href="http://tools.ietf.org/html/rfc4632">CIDR</a>ブロック表記もサポートされています。
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="configure ip address" src="/assets/images/settings/node16450-ip-address.png" /></figure>
      </li>
      <li>[<strong>保存</strong>]をクリックします。</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="sso">シングルサインオンの構成</h2>
    <p>SSO を使用するアクセス制御プロファイルを作成する場合、サイト訪問者は、サイトにアクセスする前に、有効な資格情報を使用してログインするように求められます。ギャラリーは、セキュリティードメイン間で認証および承認データを交換するためのセキュリティアサーションマークアップ言語 2.0（SAML 2.0）標準をサポートしています。</p>
    <p>ギャラリーは、以下を含むほとんどの主要なアイデンティティプロバイダをサポートしています。</p>
    <ul>
      <li>ping</li>
      <li>OneLogin</li>
      <li>ADFS 2.0/3.0</li>
      <li>グーグルGスイート</li>
      <li>Shibboleth</li>
      <li>オクタ</li>
      <li>セールスフォース・ドットコム</li>
    </ul>
    <p>SAML 2.0 標準を使用する他のプロバイダーも動作します。<a href="https://github.com/bergie/passport-saml">ギャラリーはパスポート saml</a>ライブラリを使用します。ギャラリーは、このライブラリで動作しない ID プロバイダーをサポートしていません。</p>
    <aside class="bcls-aside bcls-aside--information">注:Galleryはシングルサインオン認証にSAML 2.0を必要とします。SAML 1.1 はサポートされていません。</aside><aside class="bcls-aside bcls-aside--information">注:サポートしているのはシングルバイト文字のみです。</aside><aside class="bcls-aside bcls-aside--information">注:Galleryは、IDプロバイダーが開始する（IDP）SAMLフローのみをサポートします。サービスプロバイダーが開始するフローはサポートされていません。</aside>
    <p>お客様のSSOプロバイダーは、Assertion Consumer Service URL (ACL URL) を必要とします。ACL URLは、アクセス制御プロファイルテーブルのSSOセクションに表示されます。</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="acs url" src="/assets/images/settings/node16450-acs-url.png" /></figure>
    <p>ACS URL <code translate="No">https://auth.bcvp0rtal.com/login/callback</code>のデフォルトはです。独自の URL を指定して ACS URL を上書きすることもできます。これらのオプションはどちらも、より厳密な SSO プロバイダーを構成するために使用できます。既存のサイトの場合、<code translate="No">http(s)://&lt;site-root-url&gt;/login/callback</code>は引き続き動作しますが、ブライトコーブはパブリッシャーの使用を推奨しています<code translate="No">https://auth.bcvp0rtal.com/login/callback</code>。このエンドポイントは、ドメイン上のパスを使用するあらゆるサイトについて、適切なサイトへのSAMLデータの転送を処理します。</p>
    <aside class="bcls-aside bcls-aside--information">注:IDP が開始する SSO ワークフローを使用する場合、SSO ソフトウェアで指定された ACS URL は、そのアクセスコントロールプロファイルで設定された Gallery サイトを指している必要があります。この場合、<code translate="No">https://auth.bcvp0rtal.com/login/callback</code> URL は使用しないでください。</aside>
    <p>SSOを使用するアクセス制御プロファイルを設定するには、次の手順を行います。</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="configure sso" src="/assets/images/settings/node16450-sso.png" /></figure>
    <ol class="bcls-tasklist-restart">
      <li><strong>SSO</strong>オプションを選択します。</li>
      <li>SAML 2.0 メタデータのエクスポートファイルがある場合は、[ <strong>ファイルの選択]</strong>をクリックしてメタデータファイルを参照して選択します。これにより、<strong> SAML 2.0</strong>エンドポイントと<strong> X.509</strong>証明書フィールドに事前入力されます。</li>
      <li><strong>SAML 2.0 エンドポイント (HTTP) の値を入力します</strong>。この値は、SAML プロバイダーから入手できる必要があります。</li>
      <li><strong> X.509 証明書の値を入力します</strong>。この値は、SAML プロバイダーから入手できる必要があります。</li>
      <li>（オプション）<strong>SAML 発行者/ エンティティ ID の上書きを入力します</strong>。ここで値を入力して、任意で SAML 発行者を上書きします。</li>
      <li>（オプション）<strong>ACS URL オーバーライドを入力します</strong>。ACS の URL を任意で上書きするには、ここに値を入力します。</li>
      <li>(オプション) <strong> SAML AuthnContext オーバーライドを入力します</strong>。オプションで SAML AuthnContext を上書きするには、ここに値を入力します。</li>
      <li>（オプション）<strong>デフォルトの AuthnContext を無効にするを選択します</strong>。デフォルトでは、SSO プロファイルの場合、ギャラリーは SAML 認証コンテキストとして PasswordProtectedTransport を送信します。場合によっては、これは ID プロバイダーでサポートされていません。このオプションをオンにすると、Gallery は認証コンテキスト要求を送信しません。</li>
      <li>（オプション）外部 JavaScript に渡す対象の SAML 属性を入力します。</li>
      <li>（オプション）チェック<strong>すべての属性を公開する</strong>外部JavaScriptで使用するためにすべてのSAML属性を公開します。</li>
      <li>[ <strong>保存] をクリックします</strong>。</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="accesscode">アクセスコードの設定</h2>
    <p>サイトにアクセスコードが適用されている場合、がサイト URL にアクセスすると、閲覧者は正しいアクセスコードの入力を求められます。</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="access code prompt" src="/assets/images/settings/node16450-access-code-prompt.png" /></figure>
    <p>間違ったアクセスコードを入力すると、視聴者はエラーを受領します。アクセスコードは、建設中のサイトへのアクセスを制限する良い方法です。アクセスコードでは、サイトのセキュリティや認証は提供されません。</p>
    <p>アクセスコードを使用するようにアクセス制御プロファイルを構成するには、次の手順を実行します。</p>
    <ol class="bcls-tasklist-restart">
      <li>[ <strong>アクセスコードを要求</strong> ] オプションを選択します。</li>
      <li><strong></strong>サイトのアクセスコードを入力します。</li>
      <li><strong>アクセスコードラベルを入力します</strong>。<strong>アクセスコードラベルは</strong>、ユーザーがアクセスコードを入力する場所の上に表示されます。
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="configure access code" src="/assets/images/settings/node16450-access-code1.png" /></figure>
      </li>
      <li>（オプション）<a href="#style"></a>アクセス制御ページのスタイルを設定します。</li>
      <li>[ <strong>保存] をクリックします</strong>。</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="style">アクセス制御ページのスタイル設定</h2>
    <p>アクセスコントロールページは、サイト全体の外観に合わせてスタイル設定することができます。ギャラリーには、次の 3 つのスタイルオプションがあります。</p>
    <ul>
      <li><a href="#defaultstyle">デフォルト</a></li>
      <li><a href="#imageborder">イメージとボーダー</a></li>
      <li><a href="#custom">[カスタム]</a></li>
    </ul>
    <h3 id="defaultstyle">既定のスタイル設定</h3>
    <p>既定のスタイル設定オプションでは、ギャラリーロゴ、アクセスコードラベル、アクセスコードフィールドが常に表示されます。</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="access code prompt" src="/assets/images/settings/node16450-access-code-prompt.png" /></figure>
    <h3 id="imageborder">画像＆ボーダーのスタイリング</h3>
    <p>[イメージと境界線] オプションを使用すると、アクセス制御ページの基本的なカスタマイズを行うことができます。例を以下に見ることができます。</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="image border example" src="/assets/images/settings/node16450-image-border-example.png" /></figure>
    <p>イメージと境界線のスタイルをカスタマイズするには、次の手順に従います。</p>
    <ol class="bcls-tasklist-restart">
      <li>[ <strong>イメージとボーダー] を選択します</strong>。</li>
      <li>アクセスコントロールページに表示する画像へのリンクをドラッグ＆ドロップ、参照、または追加します。</li>
      <li><strong>クリックスルー URL を入力します</strong>。<strong>クリックスルー URL</strong>は、画像をクリック可能なリンクにします。</li>
      <li>カラーピッカーをクリックして、<strong>ヘッダー枠の色を選択します</strong>。
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="image border properties" src="/assets/images/settings/node16450-image-border-props.png" /></figure>
      </li>
      <li>[<strong>保存</strong>]をクリックします。</li>
    </ol>
    <h3 id="custom">カスタムスタイリング</h3>
    <p>[ <strong></strong>カスタムスタイル] オプションを使用すると、アクセス制御ページをより高度なカスタマイズできます。例を以下に見ることができます。</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="custom example" src="/assets/images/settings/node16450-custom-example.png" /></figure>
    <p>を使用するには<strong>カスタム</strong>オプションの場合は、次の手順に従います。</p>
    <ol class="bcls-tasklist-restart">
      <li>[ <strong>カスタム] を選択します</strong>。</li>
      <li>ヘッダーとフッターのカスタムHTMLを入力します。
        <figure class="bcls-figure"><img class="bcls-image--no-border" alt="custom properties" src="/assets/images/settings/node16450-custom-props.png" /></figure>
      </li>
      <li>[ <strong>保存] をクリックします</strong></li>
    </ol>
  </section>
</article>